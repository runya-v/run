set(NAME run)

add_executable(${NAME}
    Plugin.cpp
    main.cpp
    )

target_link_libraries(${NAME}
    dl
    ${Boost_SYSTEM_LIBRARY}
    ${Boost_FILESYSTEM_LIBRARY}
    ${Boost_PROGRAM_OPTIONS_LIBRARY}
    )

set(SETTINGS "settings")
add_library(${SETTINGS} SHARED Settings.cpp Plugin.cpp)
add_custom_command(
    TARGET ${SETTINGS} POST_BUILD
    COMMAND mv "${CMAKE_LIBRARY_OUTPUT_DIRECTORY}/libsettings.so" "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}")
